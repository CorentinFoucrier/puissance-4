for(var nbJoueur=1,nbColonne=5,nbLigne=5,jeu=!0,txt="",plateau=[],i=0;i<nbLigne;i++)plateau[i]=[];function newGame(){for(var e=0;e<nbLigne;e++)for(var n=0;n<nbColonne;n++)plateau[e][n]=0;afficheTextAnnonce("Le jeu commence ! C'est le tour du joueur "+nomDuJoueur(1)),jeu=!0,creerTableau()}function afficheTextAnnonce(e){document.getElementById("textAnnonce").innerHTML=e}function nomDuJoueur(e){return 1==e?"rouge":"bleu"}function creerTableau(){txt="<table>";for(var e=0;e<nbLigne;e++){txt+="<tr>";for(var n=0;n<nbColonne;n++)txt+='<td onclick="detectClick('+n+')" id="'+e+"-"+n+'">',1==plateau[e][n]&&(txt+='<div class="joueur1"></div>'),2==plateau[e][n]&&(txt+='<div class="joueur2"></div>'),txt+="</td>";txt+="</tr>"}txt+="</table>",document.getElementById("puissance4").innerHTML=txt}function detectClick(e){verifPosition(e)&&jeu&&(puissance4(poseJeton(e),e,0,0)?(jeu=!1,afficheTextAnnonce("Le joueur "+nomDuJoueur(nbJoueur)+" a gagnÃ© la partie !")):afficheTextAnnonce("c'est au tour du joueur "+nomDuJoueur(nbJoueur=1==nbJoueur?2:1)))}function verifPosition(e){return 0==plateau[0][e]}function poseJeton(e){for(var n=nbLigne-1;n>=0;n--)if(0==plateau[n][e])return plateau[n][e]=nbJoueur,refreshTableau(n,e,nbJoueur),n}function refreshTableau(e,n,u){document.getElementById(e+"-"+n).innerHTML='<div class="joueur'+u+'"></div>'}function puissance4(e,n,u,t){if(console.log("valeur : "+e+" "+n+" / incremente "+u+" "+t),0==t&&0==u){var o=1+puissance4(e,n-1,0,-1)+puissance4(e,n+1,0,1),a=1+puissance4(e-1,n,-1,0)+puissance4(e+1,n,1,0),r=1+puissance4(e-1,n-1,-1,-1)+puissance4(e+1,n+1,1,1),i=1+puissance4(e-1,n+1,-1,1)+puissance4(e+1,n-1,1,-1);return console.log(o,a,r,i),o>=4||a>=4||r>=4||i>=4}return e<nbLigne&&e>=0&&n<nbColonne&&n>=0?(console.log("valeur : "+e+" "+n+" / incremente "+u+" "+t),plateau[e][n]==nbJoueur?1+puissance4(e+u,n+t,u,t):0):0}newGame();